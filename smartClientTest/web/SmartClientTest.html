<!DOCTYPE html>

<html>

<head>

    <script type="text/javascript" language="javascript" src="jquery.js"></script>

    <script>
        jQuery.noConflict();
    </script>

    <script type="text/javascript" language="javascript"
            src="smartClientTest.SmartClientTest/smartClientTest.SmartClientTest.nocache.js">
    </script>

    <script type="text/javascript">

        var threedSession;

        function initThreedSession(session) {
            console.log("initThreedSession");
            threedSession = session;

            threedSession.setSeriesKey(2011, "avalon");
            threedSession.setPicks(["3544", "070", "LH02"]);

            threedSession.addUrlChangeHandler(function () {
                console.log("UrlChanged: " + threedSession.getUrls());
                refreshView();
            });

            var jsSeriesId = {
                name:"Poop",
                year:2012
            };

//            threedSession.setSeriesIdDude(jsSeriesId);

            initView();
        }

        function setPicks1() {
            threedSession.setPicks(["3544", "070", "LH02"]);
        }

        function setPicks2() {
            threedSession.setPicks(["3544", "202", "LH02"]);
        }

        function initView() {
            var viewsSelect = jQuery("#views");
            viewsSelect.change(function () {
                var selectedViewName = viewsSelect.val();
                threedSession.setView(selectedViewName);
            });
        }

        function refreshView() {
            var views = threedSession.getViews();
            var sOptions = "";
            views.forEach(function (it) {
                sOptions += "<option>" + it + "</option>"
            });

            var viewsSelect = jQuery("#views");
            viewsSelect.html(sOptions);
            viewsSelect.val(threedSession.getView());

            jQuery("#view").html(threedSession.getView());
            jQuery("#angle").html(threedSession.getAngle());
            jQuery("#urls").html(threedSession.getUrls().toString());

            var urls = threedSession.getUrls();
            urls.forEach(function (url) {
                console.log("url: " + url);
                jQuery("#threedImage").attr("src",url);
            });


        }

    </script>
</head>
<body style="padding: 1em">


<div style="padding-bottom: 2em">
    <select id="views" style="width: 10em"></select>
    <br/>
    <button onclick="threedSession.nextAngle()"><<</button>
    <button onclick="threedSession.previousAngle()">>></button>
</div>

<div>
    <button onclick="setPicks1()">Picks 1: 3544, 070, LH02</button>
    <br/>
    <button onclick="setPicks2()">Picks 2: 3544, 202, LH02</button>
    <br/>
</div>


<div style="padding-top: 2em">
    <table border="1" cellpadding='10'>
        <colgroup>
            <col style="width: 10em">
            <col style="width: 50em">
        </colgroup>
        <tr>
            <td>View</td>
            <td>
                <div id="view"></div>
            </td>
        </tr>
        <tr>
            <td>Angle</td>
            <td>
                <div id="angle"></div>
            </td>
        </tr>
        <tr>
            <td>URLs</td>
            <td>
                <div id="urls"></div>
            </td>
        </tr>
        <tr>
            <td>URLs</td>
            <td>
                <img id="threedImage">
            </td>
        </tr>
    </table>
</div>

</body>
</html>
